<component name="ca.firstvoices.auth.contrib">
	<!-- Open the login URL for unauthenticated requests -->
	<!-- 
	<extension point="openUrl" target="org.nuxeo.ecm.platform.ui.web.auth.service.PluggableAuthenticationService">
	    <openUrl name="GuestInit">
	        <grantPattern>(.*)/automation.*</grantPattern>
	    </openUrl>
  	</extension>
	-->
	<require>org.nuxeo.ecm.platform.ui.web.auth.defaultConfig</require>
	
	<extension
	    target="org.nuxeo.ecm.platform.ui.web.auth.service.PluggableAuthenticationService"
	    point="authenticators">
	  <authenticationPlugin name="FV_AUTOMATION_BASIC_AUTH" enabled="true"
	      class="org.nuxeo.ecm.platform.ui.web.auth.plugins.BasicAuthenticator">
	    <parameters>
	      <parameter name="AutoPrompt">true</parameter>
	      <parameter name="RealmName">Nuxeo Automation</parameter>
	      <parameter name="ExcludeBAHeader_Token">X-Authentication-Token</parameter>
	      <parameter name="ExcludeBAHeader_Token">X-No-Basic-Header</parameter>
	    </parameters>
	  </authenticationPlugin>
	</extension>
	
	<extension
	    target="org.nuxeo.ecm.platform.ui.web.auth.service.PluggableAuthenticationService"
	    point="specificChains">
	
    <specificAuthenticationChain name="Automation">

      <urlPatterns>
        <url>(.*)/automation.*</url>
      </urlPatterns>
      <replacementChain>
        <plugin>AUTOMATION_BASIC_AUTH</plugin>
        <plugin>TOKEN_AUTH</plugin>
        <plugin>ANONYMOUS_AUTH</plugin>
      </replacementChain>
    </specificAuthenticationChain>

    <specificAuthenticationChain name="RestAPI">
      <urlPatterns>
        <url>(.*)/api/v.*</url>
      </urlPatterns>
      <replacementChain>
        <plugin>AUTOMATION_BASIC_AUTH</plugin>
        <plugin>TOKEN_AUTH</plugin>
        <plugin>ANONYMOUS_AUTH</plugin>
      </replacementChain>
    </specificAuthenticationChain>]
    
	</extension>
	
	
	<!-- 
	<extension point="startURL" target="org.nuxeo.ecm.platform.ui.web.auth.service.PluggableAuthenticationService">

	  <startURLPattern>
	    <patterns>
	      <pattern>/nuxeo/site/guest</pattern>
	    </patterns>
	  </startURLPattern>

	</extension>-->
  	
</component>